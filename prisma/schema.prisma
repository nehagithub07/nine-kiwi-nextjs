datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  clerkId     String   @unique
  email       String   @unique
  name        String?
  companyName String?
  reports     Report[]
}

type Photo {
  name             String
  data             String // Cloudinary URL
  includeInSummary Boolean?
  caption          String?
  figureNumber     Int?
  description      String?
}

model Report {
  id                      String  @id @default(auto()) @map("_id") @db.ObjectId
  userId                  String  @db.ObjectId
  user                    User    @relation(fields: [userId], references: [id])
  status                  String
  reportId                String
  supervisorName          String
  observationTime         String?
  reportDate              String?
  preparedFor             String?
  preparedBy              String?
  clientName              String
  contractorName          String
  inspectorName           String
  contactPhone            String
  contactEmail            String
  location                String
  streetAddress           String
  city                    String
  state                   String
  country                 String
  zipCode                 String
  lat                     String
  lon                     String
  inspectionDate          String
  startInspectionTime     String
  temperature             String
  humidity                String
  windSpeed               String
  weatherDescription      String
  weatherConditions       String
  safetyCompliance        String
  safetySignage           String
  equipmentCondition      String
  workmanshipQuality      String
  siteHousekeeping        String
  communicationRating     String
  numWorkers              String
  workerAttendance        String
  workProgress            String
  scheduleCompliance      String
  materialAvailability    String
  maintenanceStatus       String
  specificationCompliance String
  incidentsHazards        String
  stakeholderVisits       String
  additionalComments      String
  inspectorSummary        String
  recommendations         String
  recommendationRating    String
  improvementAreas        String
  signatureDateTime       String
  flexibleModes           Json
  sectionPhotos           Json // Record<string, Photo[]>
  signatureData           String? // Cloudinary URL for signature image
}
